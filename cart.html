<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Корзина — BB Kitty Zhanaarka</title>
<link rel="icon" href="favicon.ico">
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:linear-gradient(180deg,#ffdfe6,#dff4ff);color:#222}
.header{padding:18px;text-align:center}
.container{max-width:960px;margin:20px auto;background:#fff;padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
.table{width:100%;border-collapse:collapse}
.table th{background:#ff80ab;color:#fff;padding:10px;text-align:left}
.table td{padding:10px;border-bottom:1px solid #eee}
.qty{width:80px}
.btn-order{background:linear-gradient(90deg,#29b6f6,#ff80ab);color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
.back{display:inline-block;margin-top:12px;text-decoration:none;color:#555}
.card-img{width:80px;height:60px;object-fit:cover;border-radius:6px}
@media(max-width:600px){ .card-img{width:60px;height:48px} }
</style>
</head>
<body>
<header class="header"><h1>Корзина — BB Kitty Zhanaarka</h1></header>
<main class="container">
  <table class="table" id="cartTable">
    <thead><tr><th>Товар</th><th>Цена</th><th>Кол-во</th><th>Сумма</th><th></th></tr></thead>
    <tbody></tbody>
  </table>
  <div style="text-align:right;margin-top:12px"><strong id="total">Итого: 0 ₸</strong></div>
  <div style="margin-top:12px">
    <button class="btn-order" onclick="checkout()">Оформить заказ через WhatsApp</button>
    <a class="back" href="index.html">← Вернуться в каталог</a>
  </div>
</main>
<footer style="text-align:center;color:#666;padding:12px">© 2025 BB Kitty Zhanaarka</footer>

<script>
function render(){
  const tbody = document.querySelector('#cartTable tbody');
  let cart = JSON.parse(localStorage.getItem('cart')||'[]');
  tbody.innerHTML = '';
  let total = 0;
  cart.forEach((it, idx)=>{
    const sum = it.price * it.qty;
    total += sum;
    const tr = document.createElement('tr');
    tr.innerHTML = '<td><img src="images/'+it.name.split(' ')[0]+'.jpg" class="card-img" alt=""><strong>'+it.name+'</strong></td><td>'+it.price+' ₸</td><td><input type="number" min="1" value="'+it.qty+'" onchange="update('+idx+', this.value)"></td><td>'+sum+' ₸</td><td><button onclick="removeItem('+idx+')">Удалить</button></td>';
    tbody.appendChild(tr);
  });
  document.getElementById('total').textContent = 'Итого: ' + total + ' ₸';
}

function update(idx, val){
  let cart = JSON.parse(localStorage.getItem('cart')||'[]');
  cart[idx].qty = parseInt(val) || 1;
  localStorage.setItem('cart', JSON.stringify(cart));
  render();
}
function removeItem(idx){
  let cart = JSON.parse(localStorage.getItem('cart')||'[]');
  cart.splice(idx,1);
  localStorage.setItem('cart', JSON.stringify(cart));
  render();
}
function checkout(){
  let cart = JSON.parse(localStorage.getItem('cart')||'[]');
  if(cart.length===0){ alert('Корзина пуста'); return; }
  let msg = 'Здравствуйте! Хочу оформить заказ:%0A';
  cart.forEach(it=>{ msg += encodeURIComponent(it.name) + ' — ' + it.qty + ' шт — ' + (it.price*it.qty) + ' ₸%0A'; });
  const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
  msg += '%0AИтого: ' + total + ' ₸';
  const phone = '77019962042';
  const url = 'https://wa.me/' + phone + '?text=' + msg;
  window.open(url, '_blank');
}
render();
</script>
</body>
</html>
